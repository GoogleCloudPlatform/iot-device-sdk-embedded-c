<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google Cloud IoT Edge Embedded C Client (IoTC) BSP: iotc_bsp_io_net.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Google Cloud IoT Edge Embedded C Client (IoTC) BSP
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_892c6830e89bd42b86edfc698815ae23.html">bsp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">iotc_bsp_io_net.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div>
<p><a href="../../d1/def/iotc__bsp__io__net_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d17/structiotc__bsp__socket__events__s.html">iotc_bsp_socket_events_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a01bc893c53cfd1ba8050bc392ebe982a"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a78b7260d504aae4684e7130be2f50e5d">iotc_bsp_io_net_state_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a></td></tr>
<tr class="separator:a01bc893c53cfd1ba8050bc392ebe982a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57bd8e7987bd4f614b66a4df39ef43ad"><td class="memItemLeft" align="right" valign="top">typedef intptr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a></td></tr>
<tr class="separator:a57bd8e7987bd4f614b66a4df39ef43ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28945674a574ba17d3a3322a3b21084c"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../da/d17/structiotc__bsp__socket__events__s.html">iotc_bsp_socket_events_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a28945674a574ba17d3a3322a3b21084c">iotc_bsp_socket_events_t</a></td></tr>
<tr class="separator:a28945674a574ba17d3a3322a3b21084c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a78b7260d504aae4684e7130be2f50e5d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a78b7260d504aae4684e7130be2f50e5d">iotc_bsp_io_net_state_e</a> { <br />
&#160;&#160;<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a78b7260d504aae4684e7130be2f50e5dabc34cf531bfbd6ed746808fe8ed7b63e">IOTC_BSP_IO_NET_STATE_OK</a> = 0, 
<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a78b7260d504aae4684e7130be2f50e5dadea0554e14a7d07646b0916c2e9422b1">IOTC_BSP_IO_NET_STATE_ERROR</a> = 1, 
<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a78b7260d504aae4684e7130be2f50e5da339dcef7ea3a6d0a02a5f664ff657bc8">IOTC_BSP_IO_NET_STATE_BUSY</a> = 2, 
<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a78b7260d504aae4684e7130be2f50e5da62be2f54ec2c3617de5de7981f979f21">IOTC_BSP_IO_NET_STATE_CONNECTION_RESET</a> = 3, 
<br />
&#160;&#160;<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a78b7260d504aae4684e7130be2f50e5dad94e52d25620be370037fc7b492f3d6d">IOTC_BSP_IO_NET_STATE_TIMEOUT</a> = 4
<br />
 }</td></tr>
<tr class="separator:a78b7260d504aae4684e7130be2f50e5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7a432e4488bff5cc75918c1495cfc20b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a7a432e4488bff5cc75918c1495cfc20b">iotc_bsp_io_net_select</a> (<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a28945674a574ba17d3a3322a3b21084c">iotc_bsp_socket_events_t</a> *socket_events_array, size_t socket_events_array_size, long timeout_sec)</td></tr>
<tr class="separator:a7a432e4488bff5cc75918c1495cfc20b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06d395d303eaef34ef63784658ac884a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a06d395d303eaef34ef63784658ac884a">iotc_bsp_io_net_create_socket</a> (<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a> *iotc_socket_nonblocking)</td></tr>
<tr class="separator:a06d395d303eaef34ef63784658ac884a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67c8aeb5f93649d85c8355d23cc5a142"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a67c8aeb5f93649d85c8355d23cc5a142">iotc_bsp_io_net_connect</a> (<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a> *iotc_socket_nonblocking, const char *host, uint16_t port)</td></tr>
<tr class="separator:a67c8aeb5f93649d85c8355d23cc5a142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe92d17d5af706eeece3783314dd8e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#adfe92d17d5af706eeece3783314dd8e3">iotc_bsp_io_net_connection_check</a> (<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a> iotc_socket_nonblocking, const char *host, uint16_t port)</td></tr>
<tr class="separator:adfe92d17d5af706eeece3783314dd8e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4472f1281b013f71053b1f94a0297213"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a4472f1281b013f71053b1f94a0297213">iotc_bsp_io_net_write</a> (<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a> iotc_socket_nonblocking, int *out_written_count, const uint8_t *buf, size_t count)</td></tr>
<tr class="separator:a4472f1281b013f71053b1f94a0297213"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b5791e2ce251bd836f8d7bc404f3051"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a6b5791e2ce251bd836f8d7bc404f3051">iotc_bsp_io_net_read</a> (<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a> iotc_socket_nonblocking, int *out_read_count, uint8_t *buf, size_t count)</td></tr>
<tr class="separator:a6b5791e2ce251bd836f8d7bc404f3051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacac7bd43e8da3524323942562de1a83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#aacac7bd43e8da3524323942562de1a83">iotc_bsp_io_net_close_socket</a> (<a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a> *iotc_socket_nonblocking)</td></tr>
<tr class="separator:aacac7bd43e8da3524323942562de1a83"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>IoTC Client's Board Support Platform (BSP) for Asynchronous Networking. </p>
<p>This file defines the API of an asynchronous platform specific networking implementation. These are all the functions one should implement to couple the IoTC client to the device's networking SDK.</p>
<p>These functions should be implemented in a non-blocking fashion. This means that these function should fit into a coopeartive-multitasking environment of the IoTC client, which is designed not to block on any one operation.</p>
<p>A device connecting to the Could IoT Core service would have a standard flow looks like the following:</p><ol type="1">
<li>create_socket</li>
<li>connect</li>
<li>connection_check</li>
<li>Iterations of read-write operations</li>
<li>close_socket when the application shuts down the connection. </li>
</ol>

<p class="definition">Definition in file <a class="el" href="../../d1/def/iotc__bsp__io__net_8h_source.html">iotc_bsp_io_net.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a01bc893c53cfd1ba8050bc392ebe982a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01bc893c53cfd1ba8050bc392ebe982a">&#9670;&nbsp;</a></span>iotc_bsp_io_net_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a78b7260d504aae4684e7130be2f50e5d">iotc_bsp_io_net_state_e</a>  <a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a28945674a574ba17d3a3322a3b21084c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28945674a574ba17d3a3322a3b21084c">&#9670;&nbsp;</a></span>iotc_bsp_socket_events_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../da/d17/structiotc__bsp__socket__events__s.html">iotc_bsp_socket_events_s</a>  <a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a28945674a574ba17d3a3322a3b21084c">iotc_bsp_socket_events_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a57bd8e7987bd4f614b66a4df39ef43ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57bd8e7987bd4f614b66a4df39ef43ad">&#9670;&nbsp;</a></span>iotc_bsp_socket_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IoTC Client BSP NET's socket representation type. </p>
<p>The IoTC Client BSP NET solution may store platform specific socket representations (handles, descriptors, etc) in a variable of this type in create function. This typed variable will be passed to the other NET BSP's functions for any and all socket operations. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/def/iotc__bsp__io__net_8h_source.html#l00160">160</a> of file <a class="el" href="../../d1/def/iotc__bsp__io__net_8h_source.html">iotc_bsp_io_net.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a78b7260d504aae4684e7130be2f50e5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78b7260d504aae4684e7130be2f50e5d">&#9670;&nbsp;</a></span>iotc_bsp_io_net_state_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a78b7260d504aae4684e7130be2f50e5d">iotc_bsp_io_net_state_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return value of the BSP NET API functions. </p>
<p>The implementation reports internal status to IoTC Client through these values.</p>
<p>An implementation of the TLS BSP must return internal status to IoTC Client through these state values. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a78b7260d504aae4684e7130be2f50e5dabc34cf531bfbd6ed746808fe8ed7b63e"></a>IOTC_BSP_IO_NET_STATE_OK&#160;</td><td class="fielddoc"><p>operation finished successfully. </p>
</td></tr>
<tr><td class="fieldname"><a id="a78b7260d504aae4684e7130be2f50e5dadea0554e14a7d07646b0916c2e9422b1"></a>IOTC_BSP_IO_NET_STATE_ERROR&#160;</td><td class="fielddoc"><p>operation failed. </p>
</td></tr>
<tr><td class="fieldname"><a id="a78b7260d504aae4684e7130be2f50e5da339dcef7ea3a6d0a02a5f664ff657bc8"></a>IOTC_BSP_IO_NET_STATE_BUSY&#160;</td><td class="fielddoc"><p>resource is busy, means: please invoke this function again later. </p>
</td></tr>
<tr><td class="fieldname"><a id="a78b7260d504aae4684e7130be2f50e5da62be2f54ec2c3617de5de7981f979f21"></a>IOTC_BSP_IO_NET_STATE_CONNECTION_RESET&#160;</td><td class="fielddoc"><p>connection lost during read or write operation. </p>
</td></tr>
<tr><td class="fieldname"><a id="a78b7260d504aae4684e7130be2f50e5dad94e52d25620be370037fc7b492f3d6d"></a>IOTC_BSP_IO_NET_STATE_TIMEOUT&#160;</td><td class="fielddoc"><p>timeout has occurred during the operation. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d1/def/iotc__bsp__io__net_8h_source.html#l00137">137</a> of file <a class="el" href="../../d1/def/iotc__bsp__io__net_8h_source.html">iotc_bsp_io_net.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aacac7bd43e8da3524323942562de1a83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacac7bd43e8da3524323942562de1a83">&#9670;&nbsp;</a></span>iotc_bsp_io_net_close_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a> iotc_bsp_io_net_close_socket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a> *&#160;</td>
          <td class="paramname"><em>iotc_socket_nonblocking</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Closes the socket.</p>
<p>Platform dependent socket close implementation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iotc_socket_nonblocking</td><td>the socket to be closed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>IOTC_BSP_IO_NET_STATE_OK - if socket closed successfully.</li>
<li>IOTC_BSP_IO_NET_STATE_ERROR - otherwise. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a67c8aeb5f93649d85c8355d23cc5a142"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67c8aeb5f93649d85c8355d23cc5a142">&#9670;&nbsp;</a></span>iotc_bsp_io_net_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a> iotc_bsp_io_net_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a> *&#160;</td>
          <td class="paramname"><em>iotc_socket_nonblocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Connects the socket to an endpoint defined by the host and port parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iotc_socket_nonblocking</td><td>the socket which needs to be connected (generated by iotc_bsp_io_net_create_socket function.) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Null terminated IP or Fully Qualified Domain Name (FQDN) of the host to connect to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>the port number of the endpoint. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>IOTC_BSP_IO_NET_STATE_OK - if successfully connected.</li>
<li>IOTC_BSP_IO_NET_STATE_ERROR - otherwise. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="adfe92d17d5af706eeece3783314dd8e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfe92d17d5af706eeece3783314dd8e3">&#9670;&nbsp;</a></span>iotc_bsp_io_net_connection_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a> iotc_bsp_io_net_connection_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a>&#160;</td>
          <td class="paramname"><em>iotc_socket_nonblocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Reports to the IoTC Client whether the provided socket is connected.</p>
<p>This is called after the 'connect' function. If the socket is connected, the IoTC will start to use read/write to handshake the TLS connection. If the return value is otherwise, then a failed connection will be reported to the client Application via its IoTC Connection Callback.</p>
<p>The two separate functions (connect and connection_check) may be confusing. The asynchronous property of the IoTC Client requires the separation of these functions. The actual TCP/IP socket connection is performed in the time between these two function calls, when select will be called on POSIX platforms, and networking tick operations invoked on No-OS devcies to complete the connection process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iotc_socket_nonblocking</td><td>the socket on which to perform the connection check. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Null terminated IP or FQDN of the host to connect to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>the port number of the endpoint. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>IOTC_BSP_IO_NET_STATE_OK - if socket is successfully connected.</li>
<li>IOTC_BSP_IO_NET_STATE_ERROR - otherwise. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a06d395d303eaef34ef63784658ac884a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06d395d303eaef34ef63784658ac884a">&#9670;&nbsp;</a></span>iotc_bsp_io_net_create_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a> iotc_bsp_io_net_create_socket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a> *&#160;</td>
          <td class="paramname"><em>iotc_socket_nonblocking</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Creates the non-blocking socket.</p>
<p>Creates the platform specific non-blocking socket and stores in it in the function parameter iotc_socket_nonblocking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">iotc_socket_nonblocking</td><td>the platform specific socket representation should be stored in this variable. This value will be passed along further BSP function calls. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>IOTC_BSP_IO_NET_STATE_OK - if the socket was created successfully.</li>
<li>IOTC_BSP_IO_NET_STATE_ERROR - otherwise. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a6b5791e2ce251bd836f8d7bc404f3051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b5791e2ce251bd836f8d7bc404f3051">&#9670;&nbsp;</a></span>iotc_bsp_io_net_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a> iotc_bsp_io_net_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a>&#160;</td>
          <td class="paramname"><em>iotc_socket_nonblocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out_read_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Reads data from the socket.</p>
<p>IoTC Client calls this function if data is expected to arrive on the socket. This function shall not block. It is up to the implementation to determine how many bytes to read at once without blocking the non blocking operation flow for too long. If the IoTC Client requires more data this function will be called again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iotc_socket_nonblocking</td><td>data is read from this socket. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_read_count</td><td>upon return this shall contain the number of read bytes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>upon return this buffer shall contain the read bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>available capacity of the buffer. A maximum this number of bytes can be stored in the buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>IOTC_BSP_IO_NET_STATE_OK - some bytes were read from the socket, number of bytes should be set properly. 0 &lt; *out_read_count.</li>
<li>IOTC_BSP_IO_NET_STATE_BUSY - if no data is available on the socket currently. This will cause the IoTC Client to revisit this function later on. *out_read_count == 0.</li>
<li>IOTC_BSP_IO_NET_STATE_ERROR - error occurred during the read operation. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a7a432e4488bff5cc75918c1495cfc20b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a432e4488bff5cc75918c1495cfc20b">&#9670;&nbsp;</a></span>iotc_bsp_io_net_select()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a> iotc_bsp_io_net_select </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a28945674a574ba17d3a3322a3b21084c">iotc_bsp_socket_events_t</a> *&#160;</td>
          <td class="paramname"><em>socket_events_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>socket_events_array_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>timeout_sec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Provides a method for the IoTC library to query socket states. These states will be used by the IoTC Client Library to schedule various read and write operations as the library communicates with the Google Cloud IoT Core service</p>
<p>The function is passed an array of socket descriptors as were returned by the iotc_bsp_io_net_create_socket call. Each element in the array corresponds to a specific socket, and contains an initialized iotc_bsp_socket_state_t structure to be filled out by this BSP implementation.</p>
<p>The BSP function should invoke functions in the native socket library to query the state of the sockets and fill in the corresponding fields in iotc_bsp_socket_state_t for that corresponding descriptor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket_events_array</td><td>an array of sockets and sockets' events </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">socket_events_array_size</td><td>size of the socket_events_array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>used for passive waiting function must not wait longer than the given timeout ( in seconds )</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>IOTC_BSP_IO_NET_STATE_OK - if select call updated any socket event.</li>
<li>IOTC_BSP_IO_NET_STATE_TIMEOUT - if select call has encountered timeout.</li>
<li>IOTC_BSP_IO_NET_STATE_ERROR - if select call finished with error. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a4472f1281b013f71053b1f94a0297213"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4472f1281b013f71053b1f94a0297213">&#9670;&nbsp;</a></span>iotc_bsp_io_net_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a01bc893c53cfd1ba8050bc392ebe982a">iotc_bsp_io_net_state_t</a> iotc_bsp_io_net_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/def/iotc__bsp__io__net_8h.html#a57bd8e7987bd4f614b66a4df39ef43ad">iotc_bsp_socket_t</a>&#160;</td>
          <td class="paramname"><em>iotc_socket_nonblocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out_written_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Sends data on the socket.</p>
<p>The IoTC Client calls this function if there is data to be sent. Just like the other functions in this BSP, this send operation shall not block. This function should write as many bytes in a chunk as possible.</p>
<p>Keep in mind that as long as this function blocks, no other event or request will be fulfilled by the IoTC Client.</p>
<p>The out parameter and return value of the function may signify a unfinished state of the send operation. If this occurs, then this same function will be called again later with the remaining data. A delay between these two calls should afford the system time to complete the transmission of the first chunk so that the second send event may be processed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iotc_socket_nonblocking</td><td>data is sent on this socket. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_written_count</td><td>upon return this should contain the number of sent bytes. Negative values will cause the IoTC client to close the connection. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>the data to send. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>number of bytes to send from the buffer. This is the size of the buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>IOTC_BSP_IO_NET_STATE_OK - if the whole buffer is sent. i.e. #count bytes are sent. *out_written_count == count.</li>
<li>IOTC_BSP_IO_NET_STATE_BUSY - if only a partial send of the buffer was completed. This return value tells the system to call this function again with remaining data. *out_written_count &lt; count. Outgoing parameter number of written bytes. This must be set properly!</li>
<li>IOTC_BSP_IO_NET_STATE_ERROR - an error occurred during the write operation. </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
